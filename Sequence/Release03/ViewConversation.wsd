@startuml ReplyConversation

skinparam Monochrome true
skinparam Shadowing false
hide footbox

actor "Admin, Member" as Actor
participant "Page: Event Detail" as EventDetailPage
participant "Container: Conversation" as ConversationContainer
participant "Component: Conversation Item" as ConversationItem
participant "Router" as Router
participant "Conversation: HTTP Transport" as ConversationHTTPTransport
participant "Conversation: Endpoint" as ConversationEndpoint
participant "Conversation: Service" as ConversationService
participant "Conversation: Command" as ConversationCommand
participant "Conversation: Query" as ConversationQuery

activate Actor

Actor->EventDetailPage: Open "Event Detail" Page
activate EventDetailPage
EventDetailPage->ConversationContainer: Render "Conversation" Container
activate ConversationContainer
ConversationContainer->ConversationItem: Render "Conversation" Item
activate ConversationItem
ConversationItem-->ConversationContainer: rendered
ConversationContainer->Router: route("GET", "v2/event/{event_id}/comments")
activate Router
Router->ConversationHTTPTransport: FetchCommentsByEventId(ConversationService, []ServerOption)
activate ConversationHTTPTransport
ConversationHTTPTransport->ConversationEndpoint: FindCommentsByEventId(ConversationService)
activate ConversationEndpoint
ConversationEndpoint->ConversationService: FindCommentsByEvent(params)

activate ConversationService
ConversationService->ConversationQuery: FindComments([]SliceConditions)
activate ConversationQuery
ConversationQuery-->ConversationService: conversation
deactivate ConversationQuery
ConversationService-->ConversationEndpoint: conversation
deactivate ConversationService

ConversationEndpoint->ConversationEndpoint: response := Response(conversation, paginateMetadata)
ConversationEndpoint-->ConversationHTTPTransport: response
deactivate ConversationEndpoint
ConversationHTTPTransport-->Router: response
deactivate ConversationHTTPTransport
Router-->ConversationContainer: response
deactivate Router
ConversationContainer->ConversationItem: Render "Comment"
ConversationItem-->ConversationContainer: rendered
deactivate ConversationItem
ConversationContainer-->EventDetailPage: rendered
deactivate ConversationContainer
EventDetailPage-->Actor: rendered
deactivate EventDetailPage

deactivate Actor

@enduml